<!DOCTYPEhtml>
{% extends 'ClubScoutGlasgow/base.html' %}
{% load staticfiles %}

{% block title_block %}
  {% if club %}
    {{ club.name }}
  {% else %}
    Unknown Category
  {% endif %}
{% endblock %}


{% block body_block %}
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v13.0" nonce="WnfP1Jl3"></script>
    <link href="{%  static 'css/club.css'%}" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src = "{% static 'javascript/CSG.js' %}"></script>
  
    <div class ="club-content">
        <h1>{{ club.name }}</h1>
        <div class="club-photos">
            <h4>Photos of club</h4>
            <br>
            {% if images %}
    
                <div class = "slider-wrap" >
                    <div class = "slider">
                        {% for image in images %}
                            <div class = "img-div" >
                                <img src = "{% static image.url %}" alt = 'image error'/> 
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <a class="prev-btn" onclick="plusSlides(-1)"><</a>
                <a class="next-btn" onclick="plusSlides(1)">></a>
            {% endif %}

           
        </div>

        <div class="club-social-media">
            <h4>Social media handles</h4>
            <div class="fb-page" data-href="{{ club.facebook }}" data-tabs="timeline" data-width="" data-height="300" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true">
                <blockquote cite="{{ club.facebook }}" class="fb-xfbml-parse-ignore">
                    <a href="{{ club.facebook }}">{{ club.name }}</a>
                </blockquote>
            </div>
            <div><a href="{{ club.instagram }}"><img src="{% static 'images/instagram-icon.png' %}" alt="instagram link" style="width:42px;height:42px;"></a></div>
        </div>

        <div class="club-opening-hours">
            <h4>Opening times</h4>
            <p>Opening hours:</p>
            {{ club.openingHours }}
        </div>

        <div class="club-about">
            <h4>About the club, location, type of music etc</h4>
            <p>Address</p>
            {{ club.location }}
        </div>

        <div class="club-info">
            <h4>Table containing all info about club ie rating, price, queue times etc</h4>
            <p>Average overall rating</p>
            {{ club.averageOverallRating }}
            <p>entry price</p>
            {{ club.entryPrice }}
            <p>number of rooms</p>
            {{ club.noOfRooms }}
        </div>

        <div class="club-map">
            <h4>Map displaying location of club</h4>
            <iframe src= {{ club.mapSrc }} width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            
        </div>
        <style>
            .checked {
              color: orange;
            }
            </style>

        <h4>Reviews left about club, username/age of reviewer, their comment and rating, reviews can be liked and reviews are sorted by most likes</h4>
            {% for review in reviews %}

                <strong> User: </strong>{{ review.reviewer }}<br>
                <strong> Age: </strong>{{ review.reviewer.age}}<br>
                <strong> Overall Rating: </strong> 
                <div id = "{{ review.reviewID }}stars"></div>

                <script type = "text/javascript">
                    var counter = "{{ review.overallRating }}";
                    var id = "{{ review.reviewID }}stars";
                    var stars = document.getElementById(id);
                    var star=[5];
                    for(let i = 0; i < 5;i++){
                        star[i] = document.createElement("span");
                        if(i<counter){
                            star[i].className = 'fa fa-star checked';
                        }else{
                            star[i].className = 'fa fa-star';
                        }
                        stars.appendChild(star[i]);
                    }

                </script>
                <br>
                <strong> Comments: </strong>
                <br>                
                
             <hr>
            {% endfor %}

        <div class="club-leave-review">
            {% if user.is_authenticated %}
                {% if club %}
                  <a href = "{% url 'ClubScoutGlasgow:write_review' club.slug %}"> Write a review for {{ club.name }}</a>
                {% else %}
                  The specified club does not exist.
                {% endif %}
            {% else %}
                <a href = "{% url 'ClubScoutGlasgow:signup' %}"> Sign up to write a review for {{ club.name }}</a>
            {% endif %}
        </div>
    </div>



{% endblock %}

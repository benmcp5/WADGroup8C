<!DOCTYPEhtml>
{% extends 'ClubScoutGlasgow/base.html' %}
{% load staticfiles %}

{% block title_block %}
  {% if club %}
    {{ club.name }}
  {% else %}
    Unknown Category
  {% endif %}
{% endblock %}


{% block body_block %}

    <link href="{%  static 'css/carousel.css'%}" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v13.0" nonce="WnfP1Jl3"></script>
    <link href="{%  static 'css/club.css'%}" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src = "{% static 'javascript/CSG.js' %}"></script>











    <h1 class="display-4 fw-normal"> {{ club.name }}</h1>
    <br>
    <main>

      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img class="d-block w-100" src="{% static 'images/ClubImages/hive/hive1.jpeg' %}" alt="First slide" style="object-fit: cover;">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="{% static 'images/ClubImages/hive/hive2.jpeg' %}" alt="Second slide" style="object-fit: cover;">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="{% static 'images/ClubImages/hive/hive3.jpeg' %}" alt="Third slide" style="object-fit: cover;">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>


      <!-- Marketing messaging and featurettes
      ================================================== -->
      <!-- Wrap the rest of the page in another container to center all the content. -->

      <div class="container marketing">



        <!-- START THE FEATURETTES -->

        <hr class="featurette-divider">

        <div class="row featurette">
          <div class="col-md-7">
            <h2 class="featurette-heading">{{ club.name }}<span class="text-muted"> on social media</span></h2>
            <p class="lead">Check out their embedded Facebook page on the right, or visit their instagram by clicking the instagram icon below.
                <div><a href="{{ club.instagram }}"><img src="{% static 'images/instagram-icon.png' %}" alt="instagram link" style="width:84px;height:auto;"></a></div>
            </p>

          </div>
          <div class="col-md-5">
            <div class="fb-page" data-href="{{ club.facebook }}" data-tabs="timeline" data-width="500" data-height="500" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true">
                <blockquote cite="{{ club.facebook }}" class="fb-xfbml-parse-ignore">
                    <a href="{{ club.facebook }}">{{ club.name }}</a>
                </blockquote>
            </div>

          </div>
        </div>


        <hr class="featurette-divider">

        <div class="row featurette">
          <div class="col-md-7 order-md-2">
            <h2 class="featurette-heading">About the club, <span class="text-muted">and its opening hours</span></h2>
            <p class="lead">
                <strong>Address</strong>
            {{ club.location }}
            <br>
            {{ club.about }}
              </p>
          </div>
          <div class="col-md-5 order-md-1">
            <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 500x500" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#eee"/><text x="50%" y="50%" fill="#aaa" dy=".3em">{{ club.openingHours }}</text></svg>

          </div>
        </div>

        <hr class="featurette-divider">

        <div class="row featurette">
          <div class="col-md-7">
            <h2 class="featurette-heading">The {{ club.name }} location <span class="text-muted">on Google Maps</span></h2>
            <p class="lead">The Google Maps element is interactive, use the plus and minus buttons to zoom in and out, or click "Directions" to be redirected to the Google Maps site.</p>
          </div>
          <div class="col-md-5">
            <iframe src= {{ club.mapSrc }} width="500" height="500" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

          </div>
        </div>

        <hr class="featurette-divider">

        <!-- /END THE FEATURETTES -->

      </div><!-- /.container -->

    </main>













  
    <div class ="club-content">
        <div class="club-photos">
            <br>
            {% if images %}
    
                <div class = "slider-wrap" >
                    <div class = "slider">
                        {% for image in images %}
                            <div class = "img-div" >
                                <img src = "{% static image.url %}" alt = 'image error'/> 
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <a class="prev-btn" onclick="plusSlides(-1)"><</a>
                <a class="next-btn" onclick="plusSlides(1)">></a>
                {% else %}
            {% endif %}
        {% for image in club.images.all %}

            <img src = "{% static image.url %}" alt = 'image error'/>
        {% endfor %}
    </div>




        <div class="club-info">
            <h4>What to know about {{ club.name }}</h4>
            <table class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">What matters on a night out</th>
                  <th scope="col">How {{ club.name }} is doing</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>How many stars ClubScoutGlasgow reviewers give on average</th>
                  <td>{{ club.averageOverallRating }} stars</td>
                </tr>
                <tr>
                  <th>Entry price</th>
                  <td>{{ club.entryPrice }} £</td>
                </tr>
                <tr>
                  <th>Number of rooms</th>
                  <td colspan="2">{{ club.noOfRooms }}</td>
                </tr>
              <tr>
                  <th>Average Time spent in Queue</th>
                  <td colspan="2">{{ club.averageQueueTime }} minutes</td>
                </tr>
              <tr>
                  <th>Drinks Prices on Average</th>
                  <td colspan="2">{{ club.averageDrinksPrice }} £</td>
                </tr>
              <tr>
                  <th>Quality of Safety</th>
                  <td colspan="2">{{ club.averageQualityOfSafety }} stars</td>
                </tr>
              <tr>
                  <th>Staff Friendliness</th>
                  <td colspan="2">{{ club.averageStaffQuality }} stars</td>
                </tr>
              </tbody>
            </table>
        </div>

        <div class="club-reviews">
        <style>
            .checked {
              color: orange;
            }
            </style>

        <h4>Top Reviews for {{ club.name }}</h4>
        <!-- Reviews left about club, username/age of reviewer, their comment and rating, reviews can be liked and reviews are sorted by most likes -->
            {% for review in reviews %}

                <strong> User: </strong>{{ review.reviewer }}<br>
                <strong> Age: </strong>{{ review.reviewer.age}}<br>
                <strong> Overall Rating: </strong> 
                <div id = "{{ review.reviewID }}stars"></div>

                <script type = "text/javascript">
                    var counter = "{{ review.overallRating }}";
                    var id = "{{ review.reviewID }}stars";
                    var stars = document.getElementById(id);
                    var star=[5];
                    for(let i = 0; i < 5;i++){
                        star[i] = document.createElement("span");
                        if(i<counter){
                            star[i].className = 'fa fa-star checked';
                        }else{
                            star[i].className = 'fa fa-star';
                        }
                        stars.appendChild(star[i]);
                    }

                </script>
                <strong> Comments: </strong>
                <br>                
                {{ review.additionalComments }}
             <hr>
            {% endfor %}
        </div>

        <div class="club-leave-review">
            {% if user.is_authenticated %}
                {% if club %}
                  <a href = "{% url 'ClubScoutGlasgow:write_review' club.slug %}"> Write a review for {{ club.name }}</a>
                {% else %}
                  The specified club does not exist.
                {% endif %}
            {% else %}
                <a href = "{% url 'ClubScoutGlasgow:login' %}"> Log in to write a review for {{ club.name }}</a>
            {% endif %}
        </div>
    </div>





{% endblock %}
